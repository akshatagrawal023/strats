<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Live Options Greeks Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>
<div class="container">
    <h1>Live Options Greeks <span id="symbol" class="pill">SBIN</span></h1>
    <div class="table-container">
        <table class="greeks-table">
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Value</th>
                    <th>Interpretation</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Underlying</td><td id="underlying" class="value">—</td><td>SBIN Current Price</td></tr>
                <tr><td>Delta</td><td id="delta" class="value">—</td><td>Directional exposure</td></tr>
                <tr><td>Gamma</td><td id="gamma" class="value">—</td><td>Delta sensitivity</td></tr>
                <tr><td>Theta</td><td id="theta" class="value">—</td><td>Daily time decay (₹)</td></tr>
                <tr><td>Vega</td><td id="vega" class="value">—</td><td>Volatility exposure (per 1%)</td></tr>
                <tr><td>Net Exposure</td><td id="net_exposure" class="value">—</td><td>Delta * Price</td></tr>
            </tbody>
        </table>
        <div class="timestamp">Last update: <span id="ts">—</span></div>
    </div>
</div>

<script>
  const socket = io();
  const el = id => document.getElementById(id);
  socket.on('connect', () => {
    console.log('Connected');
  });
  socket.on('greeks_update', (data) => {
    el('underlying').textContent = data.underlying ?? '—';
    el('delta').textContent = data.delta ?? '—';
    el('gamma').textContent = data.gamma ?? '—';
    el('theta').textContent = data.theta ?? '—';
    el('vega').textContent = data.vega ?? '—';
    el('net_exposure').textContent = data.net_exposure ?? '—';
    el('ts').textContent = new Date().toLocaleTimeString();
  });
</script>
</body>
</html>

